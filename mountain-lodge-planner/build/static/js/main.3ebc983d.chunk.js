(this["webpackJsonpportfolio-app"]=this["webpackJsonpportfolio-app"]||[]).push([[0],{13:function(e,t,a){e.exports={EditLodge:"EditLodge_EditLodge__mu_NQ",InputControl:"EditLodge_InputControl__1yT3J",InputContainer:"EditLodge_InputContainer__dDg1N",Buttons:"EditLodge_Buttons__2y7IS",editButton:"EditLodge_editButton__33hoO",deleteButton:"EditLodge_deleteButton__1HOME",previousButton:"EditLodge_previousButton__2Nm_O"}},17:function(e,t,a){e.exports={LodgeCard:"LodgeCard_LodgeCard__18U4w",HeadingContainer:"LodgeCard_HeadingContainer__1eyRG",info:"LodgeCard_info__1wQMk",iconsContainer:"LodgeCard_iconsContainer__38EEj",delete:"LodgeCard_delete__3UyPZ",edit:"LodgeCard_edit__bYa8R"}},18:function(e,t,a){e.exports={AllLodges:"AllLodges_AllLodges__y1o5m",cards:"AllLodges_cards__bAKJW",searchContainer:"AllLodges_searchContainer__y6wI5",searchInput:"AllLodges_searchInput__12oUb",hide:"AllLodges_hide__22t15",NoData:"AllLodges_NoData__2KIB_"}},19:function(e,t,a){e.exports={Form:"AddLodge_Form__1ZOgB",Buttons:"AddLodge_Buttons__1oUJW",previousButton:"AddLodge_previousButton__3NC8K",addButton:"AddLodge_addButton__3JIqz"}},21:function(e,t,a){e.exports={SpinnerWrapper:"Spinner_SpinnerWrapper__3H-yp",Spinner:"Spinner_Spinner__3ua26",Rotator:"Spinner_Rotator__2mOUT",Text:"Spinner_Text__2LybX"}},25:function(e,t,a){e.exports={NavBar:"NavBar_NavBar__lXyw8",hide:"NavBar_hide__2qNw1"}},40:function(e,t,a){e.exports={Main:"Main_Main__1dVm3"}},41:function(e,t,a){e.exports={Header:"Header_Header__3J2kb"}},42:function(e,t,a){e.exports=a(71)},47:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(37),l=a.n(o),c=a(14),d=(a(47),a(4)),i=a(5),s=a(7),u=a(6),m=a(1),p=a(2),g=a(38),h=a.n(g).a.create({baseURL:"https://huttenplaner.firebaseio.com/"}),f=a(15),E=a(19),v=a.n(E),j=a(21),_=a.n(j),b=function(e){return r.a.createElement("div",{className:_.a.SpinnerWrapper},r.a.createElement("div",{className:_.a.Spinner}),r.a.createElement("h3",{className:_.a.Text},e.children))},L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.focusInputRef.current.focus()},e.submitHandler=function(t){if(!t.key||"Enter"===t.key){t.preventDefault(),e.setState({loading:!0});var a=Object(m.a)({},e.state.lodgeData);h.post("/lodges.json",a).then((function(){for(var t in a)a[t]="";e.setState({lodgeData:a,loading:!1}),e.props.updateData(e.state.loadingMessage)})).catch((function(e){return console.log(e)}))}},e.changeHandler=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{lodgeData:Object(m.a)(Object(m.a)({},e.lodgeData),{},Object(f.a)({},n,r.toLowerCase()))}}))},e.focusInputRef=r.a.createRef(),e.state={lodgeData:{name:"",altitude:"",region:""},formIsValid:!1,loading:!1,loadingMessage:"Adding data..."},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=r.a.createElement(n.Fragment,null,r.a.createElement("form",{className:v.a.Form,onKeyDown:this.submitHandler},r.a.createElement("h2",{className:v.a.Heading},"Add new lodge"),r.a.createElement("div",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{ref:this.focusInputRef,type:"text",name:"name",value:this.state.lodgeData.name,onChange:this.changeHandler,placeholder:"Name..."})),r.a.createElement("div",null,r.a.createElement("label",null,"Altitude"),r.a.createElement("input",{type:"text",name:"altitude",value:this.state.lodgeData.altitude,onChange:this.changeHandler,placeholder:"Altitude..."}),"        "),r.a.createElement("div",null,r.a.createElement("label",null,"Region"),r.a.createElement("input",{type:"text",name:"region",value:this.state.lodgeData.region,onChange:this.changeHandler,placeholder:"Region..."}))),r.a.createElement("div",{className:v.a.Buttons},r.a.createElement("button",{onClick:function(){return e.props.history.goBack()},className:v.a.previousButton},r.a.createElement("i",{className:"fas fa-chevron-left fa-2x"})),r.a.createElement("button",{onClick:this.submitHandler,className:v.a.addButton},r.a.createElement("i",{className:"fas fa-plus-square fa-2x"}))));return this.state.loading&&(t=r.a.createElement(b,null,this.state.loadingMessage)),t}}]),a}(n.Component),N=a(17),C=a.n(N),O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:C.a.LodgeCard},r.a.createElement("div",{className:C.a.iconsContainer},r.a.createElement(c.b,{to:{pathname:"/edit/".concat(this.props.data.name),lodgeID:this.props.data.id}},r.a.createElement("i",{className:"fas fa-pencil-alt ".concat(C.a.edit)})),r.a.createElement("i",{onClick:this.props.deleteLodge,className:"fas fa-trash-alt ".concat(C.a.delete)})),r.a.createElement("div",{className:C.a.HeadingContainer},r.a.createElement("h3",null,this.props.data.name)),r.a.createElement("div",{className:C.a.info},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-image"})," ",this.props.data.region),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-arrow-circle-up"})," ",this.props.data.altitude,"m")))}}]),a}(n.Component),A=a(18),y=a.n(A),w=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchValue:"",showSearch:!1},e.setShowSearch=function(){return e.setState((function(e){return{showSearch:!e.showSearch}}))},e.setSearchValue=function(t){return e.setState({searchValue:t.target.value.toLowerCase()})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement("h3",{className:y.a.NoData},"No lodges to display"));this.props.lodges&&(t=this.props.lodges.filter((function(t){var a=e.state.searchValue.length;return t.name.slice(0,a)===e.state.searchValue.toLowerCase()})).map((function(t){return r.a.createElement(O,{deleteLodge:function(){return e.props.deleteLodge(t.id)},updateData:e.props.updateData,key:t.id,data:t})})));var a=[y.a.searchInput];!this.state.showSearch&&a.push(y.a.hide);var n=r.a.createElement("input",{className:a.join(" "),placeholder:"Search...",type:"text",value:this.state.searchValue,onChange:this.setSearchValue});return r.a.createElement("div",{className:y.a.AllLodges},r.a.createElement("h2",null,r.a.createElement("span",{className:y.a.searchContainer},r.a.createElement("i",{className:"fas fa-search",onClick:this.setShowSearch}),n),r.a.createElement("span",null,"All Lodges")),r.a.createElement("div",{className:y.a.cards},t))}}]),a}(n.Component),D=a(26),I=a(13),S=a.n(I),k=a(8),B=a.n(k),H=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).selectChangeHandler=function(t){var a=t.target,n=a.name,r=a.value;e.props.edit(Object(m.a)(Object(m.a)({},e.props.adjacentLodge),{},Object(f.a)({},n,r)))},e.inputChangeHandler=function(t,a){var n=t.target,r=n.name,o=n.value,l=Object(m.a)({},e.props.adjacentLodge[r]);l[a]=o;var c=Object(m.a)(Object(m.a)({},e.props.adjacentLodge),{},Object(f.a)({},r,l));e.props.edit(c)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.options.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}));return r.a.createElement("div",{className:B.a.AddAdjacentLodge},r.a.createElement("div",{className:B.a.SelectContainer},r.a.createElement("select",{name:"id",onChange:this.selectChangeHandler,defaultValue:this.props.defaultValue},t),r.a.createElement("i",{className:"fas fa-times",onClick:this.props.remove})),r.a.createElement("div",{className:B.a.DurationContainer},r.a.createElement("div",{className:B.a.InputContainer},r.a.createElement("div",{className:B.a.IconsContainer},r.a.createElement("i",{className:"fas fa-clock"}),r.a.createElement("p",null,"Outward"),r.a.createElement("i",{className:"fas fa-arrow-right"})),r.a.createElement("div",{className:B.a.SingleInput},r.a.createElement("input",{name:"outward",value:this.props.adjacentLodge.outward.hours,placeholder:"time...",onChange:function(t){return e.inputChangeHandler(t,"hours")}}),r.a.createElement("p",{className:B.a.InputAnnotation},"hours")),r.a.createElement("div",{className:B.a.SingleInput},r.a.createElement("input",{name:"outward",value:this.props.adjacentLodge.outward.minutes,placeholder:"time...",onChange:function(t){return e.inputChangeHandler(t,"minutes")}}),r.a.createElement("p",{className:B.a.InputAnnotation},"minutes"))),r.a.createElement("div",{className:B.a.InputContainer},r.a.createElement("div",{className:B.a.IconsContainer},r.a.createElement("i",{className:"fas fa-clock"}),r.a.createElement("p",null,"Return"),r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("div",{className:B.a.SingleInput},r.a.createElement("input",{name:"return",value:this.props.adjacentLodge.return.hours,placeholder:"time...",onChange:function(t){return e.inputChangeHandler(t,"hours")}}),r.a.createElement("p",{className:B.a.InputAnnotation},"hours")),r.a.createElement("div",{className:B.a.SingleInput},r.a.createElement("input",{name:"return",value:this.props.adjacentLodge.return.minutes,placeholder:"time...",onChange:function(t){return e.inputChangeHandler(t,"minutes")}}),r.a.createElement("p",{className:B.a.InputAnnotation},"minutes")))))}}]),a}(n.Component),x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={lodgeData:{name:"",altitude:"",region:"",adjacentLodges:[]},lodges:[],id:"",editAllowed:!1,error:null},e.checkInputValidity=function(e){return!0},e.deleteHandler=function(){e.props.deleteLodge(e.state.id)&&e.props.history.goBack()},e.submitHandler=function(t){t.preventDefault(),e.props.setLoading("Editing data...")&&e.props.history.goBack(),h.get("/lodges.json").then((function(t){for(var a in t.data){t.data[a].adjacentLodges||(t.data[a].adjacentLodges=[]);var n=t.data[a].adjacentLodges.filter((function(t){return t.id!==e.state.id}));t.data[a].adjacentLodges=n}t.data[e.state.id]&&(t.data[e.state.id]=e.state.lodgeData,e.state.lodgeData.adjacentLodges.forEach((function(a){t.data[a.id].adjacentLodges.push({id:e.state.id,outward:a.return,return:a.outward})}))),h.put("/lodges.json",t.data).then((function(){return e.props.updateData()})).catch((function(t){return e.setState({error:t})}))}))},e.inputChangeHandler=function(t){var a=Object(m.a)({},e.state);a.lodgeData[t.target.name]=t.target.value,a.editAllowed=e.checkInputValidity(a),e.setState(a)},e.addAdjacentLodge=function(t){t.preventDefault();var a=Object(D.a)(e.state.lodgeData.adjacentLodges).map((function(e){return Object(m.a)({},e)})),n=e.props.lodges.filter((function(t){return t.id!==e.state.id&&function(t){return!e.state.lodgeData.adjacentLodges.map((function(e){return e.id})).includes(t)}(t.id)}))[0];n?a.push({id:n.id,outward:{hours:"",minutes:""},return:{hours:"",minutes:""}}):alert("All possible lodges have already been added");var r=Object(m.a)(Object(m.a)({},e.state.lodgeData),{},{adjacentLodges:a}),o=Object(m.a)(Object(m.a)({},e.state),{},{lodgeData:r});o.editAllowed=e.checkInputValidity(o),e.setState(o)},e.editAdjacentLodge=function(t,a){e.setState((function(n){var r=Object(D.a)(e.state.lodgeData.adjacentLodges).map((function(e){return e.id===t?a:e})),o=Object(m.a)(Object(m.a)({},n.lodgeData),{},{adjacentLodges:r}),l=Object(m.a)(Object(m.a)({},n),{},{lodgeData:o});return Object(m.a)(Object(m.a)({},l),{},{editAllowed:e.checkInputValidity(l)})}))},e.removeAdjacentLodge=function(t){e.setState((function(a){var n=a.lodgeData.adjacentLodges.filter((function(e){return e.id!==t})),r=Object(m.a)(Object(m.a)({},a.lodgeData),{},{adjacentLodges:n}),o=Object(m.a)(Object(m.a)({},a),{},{lodgeData:r});return Object(m.a)(Object(m.a)({},o),{},{editAllowed:e.checkInputValidity(o)})}))},e.compare=function(e,t){return e>t?1:e<t?-1:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.lodges.find((function(t){return t.name===e.props.match.params.id})),a=[];t.adjacentLodges&&(a=t.adjacentLodges.map((function(e){return Object(m.a)({},e)}))),this.setState({id:t.id,lodgeData:{name:t.name,altitude:t.altitude,region:t.region,adjacentLodges:a||[]}})}},{key:"render",value:function(){var e=this,t=this.state.lodgeData.adjacentLodges.map((function(t){var a=e.props.lodges.find((function(e){return e.id===t.id})),n=e.props.lodges.filter((function(t){return t.id!==e.state.id&&function(t){return!e.state.lodgeData.adjacentLodges.map((function(e){return e.id})).includes(t)}(t.id)})).concat(a).sort((function(t,a){return e.compare(t.name,a.name)}));return r.a.createElement(H,{key:t.id,adjacentLodge:t,edit:function(a){return e.editAdjacentLodge(t.id,a)},options:n,defaultValue:t.id,remove:function(){return e.removeAdjacentLodge(t.id)}})})),a=r.a.createElement(n.Fragment,null,r.a.createElement("form",{className:S.a.EditLodge},r.a.createElement("h2",{className:S.a.Heading},"Edit lodge info"),r.a.createElement("div",{className:S.a.InputControl},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.state.lodgeData.name,onChange:this.inputChangeHandler,placeholder:"Name..."})),r.a.createElement("div",{className:S.a.InputControl},r.a.createElement("label",null,"Altitude"),r.a.createElement("input",{type:"text",name:"altitude",value:this.state.lodgeData.altitude,onChange:this.inputChangeHandler,placeholder:"Altitude..."})),r.a.createElement("div",{className:S.a.InputControl},r.a.createElement("label",null,"Region"),r.a.createElement("input",{type:"text",name:"region",value:this.state.lodgeData.region,onChange:this.inputChangeHandler,placeholder:"Region..."})),r.a.createElement("div",{className:S.a.InputControl},r.a.createElement("label",null,"Adjacent Lodges"),r.a.createElement("div",{className:S.a.InputContainer},t,r.a.createElement("button",{onClick:this.addAdjacentLodge},r.a.createElement("i",{className:"fas fa-plus-square fa-2x"}))))),r.a.createElement("div",{className:S.a.Buttons},r.a.createElement("button",{onClick:function(){return e.props.history.goBack()},className:S.a.previousButton},r.a.createElement("i",{className:"fas fa-chevron-left fa-2x"})),r.a.createElement("button",{onClick:this.submitHandler,disabled:!this.state.editAllowed,className:S.a.editButton},r.a.createElement("i",{className:"fas fa-save fa-2x"})),r.a.createElement("button",{onClick:this.deleteHandler,className:S.a.deleteButton},r.a.createElement("i",{className:"fas fa-trash-alt fa-2x"}))));return this.state.error&&(a=r.a.createElement("h3",null,"ERROR")),a}}]),a}(n.Component),M=a(40),R=a.n(M),V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={lodges:[],loading:!0,loadingMessage:"Loading..."},e.deleteLodge=function(t){return!!window.confirm("Are you sure?")&&(e.setLoading("Deleting data..."),h.get("/lodges.json").then((function(a){a.data[t].adjacentLodges&&a.data[t].adjacentLodges.forEach((function(e){var n=a.data[e.id];n&&(n.adjacentLodges=n.adjacentLodges.filter((function(e){return e.id!==t})))})),delete a.data[t],h.put("/lodges.json",a.data).then((function(){return e.updateData()}))})),!0)},e.updateData=function(t){return e.setLoading(t||"Importing data..."),setTimeout((function(){h.get("/lodges.json").then((function(t){return e.setState({loading:!1,lodges:t.data&&Object.entries(t.data).map((function(e){return Object(m.a)(Object(m.a)({},e[1]),{},{id:e[0]})})).sort((function(t,a){return e.compare(t.name,a.name)}))}),!0}))}),500),!1},e.setLoading=function(t){var a=!!t;return e.setState({loadingMessage:t,loading:a}),!0},e.compare=function(e,t){return e>t?1:e<t?-1:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"render",value:function(){var e=this,t=r.a.createElement(b,null,this.state.loadingMessage);return this.state.loading||(t=r.a.createElement("main",{className:R.a.Main},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/all-lodges",component:function(){return r.a.createElement(w,{updateData:e.updateData,lodges:e.state.lodges,deleteLodge:e.deleteLodge})}}),r.a.createElement(p.b,{path:"/add-lodge",component:function(t){return r.a.createElement(L,Object.assign({},t,{updateData:e.updateData}))}}),r.a.createElement(p.b,{path:"/edit/:id",component:function(t){return r.a.createElement(x,Object.assign({},t,{deleteLodge:e.deleteLodge,updateData:e.updateData,lodges:e.state.lodges,setLoading:e.setLoading}))}}),r.a.createElement(p.a,{from:"/",to:"all-lodges"})))),t}}]),a}(n.Component),J=a(41),T=a.n(J),U=a(25),F=a.n(U),K=function(e){var t=[F.a.NavBar,F.a.hide];return e.show&&t.pop(),r.a.createElement("nav",{className:t.join(" ")},r.a.createElement("h3",null,"Navigation"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{onClick:e.showNavBar,to:"/all-lodges"},"All Lodges")),r.a.createElement("li",null,r.a.createElement(c.b,{onClick:e.showNavBar,to:"/add-lodge"},"Add New Lodge"))))},W=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showNav:!1},e.showNavBar=function(){return e.setState((function(e){return{showNav:!e.showNav}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=r.a.createElement("i",{onClick:this.showNavBar,className:"fas fa-".concat(this.state.showNav?"chevron-left":"bars"," fa-2x")});return r.a.createElement("header",{className:T.a.Header},e,r.a.createElement("h1",null,"Austrian Mountain Lodges"),r.a.createElement(K,{showNavBar:this.showNavBar,show:this.state.showNav}))}}]),a}(n.Component),q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(W,null),r.a.createElement(V,null))}}]),a}(n.Component),G=(a(70),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null)}}]),a}(n.Component)),Z=Object(p.g)(G);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(Z,null),r.a.createElement(q,null))),document.getElementById("root"))},8:function(e,t,a){e.exports={AddAdjacentLodge:"AddAdjacentLodge_AddAdjacentLodge__3BrSK",SelectContainer:"AddAdjacentLodge_SelectContainer__29Aal",DurationContainer:"AddAdjacentLodge_DurationContainer__1eGxG",InputContainer:"AddAdjacentLodge_InputContainer__331pS",IconsContainer:"AddAdjacentLodge_IconsContainer__2d4Ka",InputAnnotation:"AddAdjacentLodge_InputAnnotation__2Wz-Z",SingleInput:"AddAdjacentLodge_SingleInput__Yl3GE"}}},[[42,1,2]]]);
//# sourceMappingURL=main.3ebc983d.chunk.js.map